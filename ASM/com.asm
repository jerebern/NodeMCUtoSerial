
;===========================================================================================================================================================================			
;										Init COM
;===========================================================================================================================================================================		 
Init_Com                          PROC NEAR					;void Init_Com()	{
	
			 PUSH BP
			 MOV BP,SP
			 PUSH AX
			
			 MOV DX,0
			 MOV AH,00
			 MOV AL,10100011B					;INITIALISE le port COM1 2400-N-8-1
			 INT 14H

	
			 ;POUR TESTER SI LE COM FONCTIONE
			 
			 MOV DL,AH
			 ADD DL,'0'
			 MOV AH,2							;printf("COM PORT STATE")
			 INT 21H				 

			 MOV AH,02H
			 MOV DL,10					;printf("\n")
			 INT 21H
		
			 MOV AH,02H
			 MOV DL,13
			 INT 21h			 

			 POP AX	
			 MOV SP,BP
			 POP BP
			 RET										;return
	
Init_Com                           ENDP 		;}	


;===========================================================================================================================================================================			
;										Fin Init COM
;===========================================================================================================================================================================		
 
;===========================================================================================================================================================================			
;										Send COM
;===========================================================================================================================================================================
TX_Com                          PROC NEAR					;void Send_Com(cartoSend)	{

	
			 CarToSend			  EQU	   <WORD PTR[BP+4]>		
			
			 PUSH BP
			 MOV BP,SP
			 PUSH AX
			 
			 MOV AX,CarToSend
			 MOV dx,0
			 MOV AH,01h						;tx(cartoSend)
			 INT 14H			 

			 POP AX	
			 MOV SP,BP
			 POP BP
			 RET										;return
	
TX_Com                           	ENDP 		;}	


;===========================================================================================================================================================================			
;										Fin Send COM
;===========================================================================================================================================================================



;===========================================================================================================================================================================			
;										RECEIVE COM
;===========================================================================================================================================================================
RX_com                          PROC NEAR					;void receive_Com(&cartoReceive)	{

	
					CarToReceive			  EQU	   <WORD PTR[BP+4]>		
			
			 PUSH BP
			 MOV BP,SP
			 PUSH AX
			 
			 MOV dx,0			 
 
			 MOV AH,02h						;rx(cartoReceive)
			 INT 14H		
			 MOV AH,0						;Eviter de se ramasser avec de la Junk comme CAR
			 MOV CarToReceive,AX
			

			 POP AX	
			 MOV SP,BP
			 POP BP
			 RET										;return
	
RX_Com                           	ENDP 		;}	


;===========================================================================================================================================================================			
;										Fin RECEIVE COM
;===========================================================================================================================================================================
